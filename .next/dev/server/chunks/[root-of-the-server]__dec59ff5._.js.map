{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/DEMO-PROJECTS/AstroWeb/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || \"https://your-project.supabase.co\";\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || \"your-anon-key\";\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\nexport async function getAuthToken() {\r\n  try {\r\n    const { data: { session } } = await supabase.auth.getSession();\r\n    return session?.access_token || null;\r\n  } catch (error) {\r\n    console.error(\"Error getting auth token:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport async function signUp(email: string, password: string) {\r\n  return await supabase.auth.signUp({ email, password });\r\n}\r\n\r\nexport async function signIn(email: string, password: string) {\r\n  return await supabase.auth.signInWithPassword({ email, password });\r\n}\r\n\r\nexport async function signOut() {\r\n  return await supabase.auth.signOut();\r\n}\r\n\r\nexport async function getCurrentUser() {\r\n  const { data: { user } } = await supabase.auth.getUser();\r\n  return user;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAEA,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAE9D,MAAM,WAAW,IAAA,iKAAY,EAAC,aAAa;AAE3C,eAAe;IACpB,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;QAC5D,OAAO,SAAS,gBAAgB;IAClC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO;IACT;AACF;AAEO,eAAe,OAAO,KAAa,EAAE,QAAgB;IAC1D,OAAO,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;QAAE;QAAO;IAAS;AACtD;AAEO,eAAe,OAAO,KAAa,EAAE,QAAgB;IAC1D,OAAO,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;QAAE;QAAO;IAAS;AAClE;AAEO,eAAe;IACpB,OAAO,MAAM,SAAS,IAAI,CAAC,OAAO;AACpC;AAEO,eAAe;IACpB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,OAAO;AACT"}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///D:/DEMO-PROJECTS/AstroWeb/src/pages/api/muhurat.ts"],"sourcesContent":["import { NextApiRequest, NextApiResponse } from \"next\";\r\nimport { supabase } from \"@/lib/supabase\";\r\n\r\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\r\n    if (req.method === \"GET\") {\r\n        try {\r\n            const { month, year } = req.query;\r\n\r\n            let query = supabase.from(\"muhurats\").select(\"*\");\r\n\r\n            // If month/year provided, filter by it. Else get the current/latest one.\r\n            if (month) {\r\n                query = query.eq(\"month\", month);\r\n            }\r\n\r\n            // Order by created_at desc to get the latest entry for the month/default\r\n            const { data, error } = await query.order(\"created_at\", { ascending: false }).limit(1);\r\n\r\n            if (error) {\r\n                // If table doesn't exist yet, return empty array\r\n                if (error.code === '42P01') {\r\n                    return res.status(200).json([]);\r\n                }\r\n                throw error;\r\n            }\r\n\r\n            // Transform snake_case to camelCase\r\n            const formattedData = data.map(item => ({\r\n                id: item.id,\r\n                month: item.month,\r\n                year: item.year,\r\n                monthName: item.month_name,\r\n                vehiclePurchase: item.vehicle_purchase,\r\n                miscellaneousPurchase: item.miscellaneous_purchase,\r\n                newHome: item.new_home,\r\n                auspiciousDays: item.auspicious_days,\r\n                inauspiciousDays: item.inauspicious_days,\r\n                note: item.note,\r\n                createdAt: item.created_at\r\n            }));\r\n\r\n            return res.status(200).json(formattedData);\r\n        } catch (error) {\r\n            console.error(\"Error fetching muhurat:\", error);\r\n            return res.status(500).json({ error: \"Failed to fetch muhurat\" });\r\n        }\r\n    }\r\n\r\n    if (req.method === \"POST\") {\r\n        try {\r\n            // Basic auth check\r\n            const authHeader = req.headers.authorization;\r\n            if (!authHeader) {\r\n                return res.status(401).json({ error: \"Unauthorized\" });\r\n            }\r\n\r\n            const {\r\n                month, // Format: \"YYYY-MM\"\r\n                year,\r\n                monthName,\r\n                vehiclePurchase,\r\n                miscellaneousPurchase,\r\n                newHome,\r\n                auspiciousDays,\r\n                inauspiciousDays,\r\n                note\r\n            } = req.body;\r\n\r\n            const { data, error } = await supabase\r\n                .from(\"muhurats\")\r\n                .upsert({\r\n                    month,\r\n                    year,\r\n                    month_name: monthName,\r\n                    vehicle_purchase: vehiclePurchase,\r\n                    miscellaneous_purchase: miscellaneousPurchase,\r\n                    new_home: newHome,\r\n                    auspicious_days: auspiciousDays,\r\n                    inauspicious_days: inauspiciousDays,\r\n                    note\r\n                }, { onConflict: 'month' })\r\n                .select()\r\n                .single();\r\n\r\n            if (error) throw error;\r\n\r\n            return res.status(200).json(data);\r\n        } catch (error) {\r\n            console.error(\"Error saving muhurat:\", error);\r\n            return res.status(500).json({ error: \"Failed to save muhurat\" });\r\n        }\r\n    }\r\n\r\n    return res.status(405).json({ error: \"Method not allowed\" });\r\n}\r\n"],"names":[],"mappings":";;;;AACA;;AAEe,eAAe,QAAQ,GAAmB,EAAE,GAAoB;IAC3E,IAAI,IAAI,MAAM,KAAK,OAAO;QACtB,IAAI;YACA,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,IAAI,KAAK;YAEjC,IAAI,QAAQ,2JAAQ,CAAC,IAAI,CAAC,YAAY,MAAM,CAAC;YAE7C,yEAAyE;YACzE,IAAI,OAAO;gBACP,QAAQ,MAAM,EAAE,CAAC,SAAS;YAC9B;YAEA,yEAAyE;YACzE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,MAAM,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM,GAAG,KAAK,CAAC;YAEpF,IAAI,OAAO;gBACP,iDAAiD;gBACjD,IAAI,MAAM,IAAI,KAAK,SAAS;oBACxB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,EAAE;gBAClC;gBACA,MAAM;YACV;YAEA,oCAAoC;YACpC,MAAM,gBAAgB,KAAK,GAAG,CAAC,CAAA,OAAQ,CAAC;oBACpC,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,MAAM,KAAK,IAAI;oBACf,WAAW,KAAK,UAAU;oBAC1B,iBAAiB,KAAK,gBAAgB;oBACtC,uBAAuB,KAAK,sBAAsB;oBAClD,SAAS,KAAK,QAAQ;oBACtB,gBAAgB,KAAK,eAAe;oBACpC,kBAAkB,KAAK,iBAAiB;oBACxC,MAAM,KAAK,IAAI;oBACf,WAAW,KAAK,UAAU;gBAC9B,CAAC;YAED,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAChC,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAA0B;QACnE;IACJ;IAEA,IAAI,IAAI,MAAM,KAAK,QAAQ;QACvB,IAAI;YACA,mBAAmB;YACnB,MAAM,aAAa,IAAI,OAAO,CAAC,aAAa;YAC5C,IAAI,CAAC,YAAY;gBACb,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;oBAAE,OAAO;gBAAe;YACxD;YAEA,MAAM,EACF,KAAK,EACL,IAAI,EACJ,SAAS,EACT,eAAe,EACf,qBAAqB,EACrB,OAAO,EACP,cAAc,EACd,gBAAgB,EAChB,IAAI,EACP,GAAG,IAAI,IAAI;YAEZ,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2JAAQ,CACjC,IAAI,CAAC,YACL,MAAM,CAAC;gBACJ;gBACA;gBACA,YAAY;gBACZ,kBAAkB;gBAClB,wBAAwB;gBACxB,UAAU;gBACV,iBAAiB;gBACjB,mBAAmB;gBACnB;YACJ,GAAG;gBAAE,YAAY;YAAQ,GACxB,MAAM,GACN,MAAM;YAEX,IAAI,OAAO,MAAM;YAEjB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAChC,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAAyB;QAClE;IACJ;IAEA,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;QAAE,OAAO;IAAqB;AAC9D"}}]
}