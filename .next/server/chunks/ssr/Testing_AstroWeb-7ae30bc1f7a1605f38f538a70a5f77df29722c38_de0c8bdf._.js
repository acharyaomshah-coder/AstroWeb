module.exports=[244,a=>{"use strict";let b=(0,a.i(27660).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);a.s(["XCircle",()=>b],244)},93859,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(61320),g=a.i(315),h=a.i(4500),i=a.i(64747),j=a.i(30328),k=a.i(29659),l=a.i(70448),m=a.i(30379),n=a.i(89697),o=a.i(56522),p=a.i(63959),q=a.i(53530),r=a.i(56847),s=a.i(72980),t=a.i(12709),u=a.i(244),v=a.i(45513),w=b([k,l,m]);function x(){let a=(0,f.useRouter)(),{isAdmin:b,loading:c}=(0,i.useAuth)(),[w,x]=(0,e.useState)([]),[y,z]=(0,e.useState)(!0),[A,B]=(0,e.useState)(null),[C,D]=(0,e.useState)("all");(0,e.useEffect)(()=>{c||b||a.push("/")},[c,b,a]),(0,e.useEffect)(()=>{b&&E()},[b]);let E=async()=>{try{z(!0);let{data:a,error:b}=await j.supabase.from("appointments").select("*").order("created_at",{ascending:!1});if(b)throw b;x(a||[])}catch(a){console.error("Error fetching appointments:",a)}finally{z(!1)}},F=async(a,b)=>{try{B(a);let{error:c}=await j.supabase.from("appointments").update({status:b}).eq("id",a);if(c)throw c;x(c=>c.map(c=>c.id===a?{...c,status:b}:c))}catch(a){console.error("Error updating appointment:",a),alert("Failed to update appointment status")}finally{B(null)}},G=async a=>{if(confirm("Are you sure you want to delete this appointment?"))try{B(a);let{error:b}=await j.supabase.from("appointments").delete().eq("id",a);if(b)throw b;x(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Error deleting appointment:",a),alert("Failed to delete appointment")}finally{B(null)}};if(c||!b)return(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,d.jsx)(v.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});let H="all"===C?w:w.filter(a=>a.status===C);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.default,{children:(0,d.jsx)("title",{children:"Manage Appointments - Admin Dashboard"})}),(0,d.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,d.jsx)("div",{className:"bg-primary text-primary-foreground py-8",children:(0,d.jsxs)("div",{className:"container mx-auto px-4 lg:px-8",children:[(0,d.jsx)(h.default,{href:"/admin",children:(0,d.jsxs)(k.Button,{variant:"ghost",className:"mb-4 text-primary-foreground hover:bg-primary-foreground/10",children:[(0,d.jsx)(n.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),(0,d.jsx)("h1",{className:"font-serif text-4xl font-bold mb-2",children:"Appointments"}),(0,d.jsx)("p",{className:"text-primary-foreground/90",children:"Manage consultation bookings"})]})}),(0,d.jsxs)("div",{className:"container mx-auto px-4 lg:px-8 py-8",children:[(0,d.jsxs)("div",{className:"mb-6 flex flex-wrap gap-2",children:[(0,d.jsxs)(k.Button,{variant:"all"===C?"default":"outline",onClick:()=>D("all"),children:["All (",w.length,")"]}),(0,d.jsxs)(k.Button,{variant:"pending"===C?"default":"outline",onClick:()=>D("pending"),children:["Pending (",w.filter(a=>"pending"===a.status).length,")"]}),(0,d.jsxs)(k.Button,{variant:"accepted"===C?"default":"outline",onClick:()=>D("accepted"),children:["Accepted (",w.filter(a=>"accepted"===a.status).length,")"]}),(0,d.jsxs)(k.Button,{variant:"completed"===C?"default":"outline",onClick:()=>D("completed"),children:["Completed (",w.filter(a=>"completed"===a.status).length,")"]})]}),y?(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(v.Loader2,{className:"h-8 w-8 animate-spin text-primary mx-auto"}),(0,d.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading appointments..."})]}):0===H.length?(0,d.jsx)(l.Card,{children:(0,d.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,d.jsx)(o.Calendar,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"No appointments found"})]})}):(0,d.jsx)("div",{className:"space-y-4",children:H.map(a=>(0,d.jsxs)(l.Card,{className:"hover-elevate transition-all",children:[(0,d.jsx)(l.CardHeader,{children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(s.User,{className:"h-5 w-5 text-primary"}),a.name]}),(0,d.jsxs)(l.CardDescription,{className:"mt-2 space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(q.Mail,{className:"h-4 w-4"}),a.email]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(r.Phone,{className:"h-4 w-4"}),a.phone]})]})]}),(0,d.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[(a=>{switch(a){case"pending":return(0,d.jsx)(m.Badge,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"accepted":return(0,d.jsx)(m.Badge,{className:"bg-green-100 text-green-800",children:"Accepted"});case"declined":return(0,d.jsx)(m.Badge,{className:"bg-red-100 text-red-800",children:"Declined"});case"completed":return(0,d.jsx)(m.Badge,{className:"bg-blue-100 text-blue-800",children:"Completed"});default:return(0,d.jsx)(m.Badge,{variant:"secondary",children:a})}})(a.status),(a=>{switch(a){case"pending":return(0,d.jsx)(m.Badge,{variant:"outline",className:"border-yellow-300 text-yellow-700",children:"Payment Pending"});case"completed":return(0,d.jsx)(m.Badge,{variant:"outline",className:"border-green-300 text-green-700",children:"Paid"});case"failed":return(0,d.jsx)(m.Badge,{variant:"outline",className:"border-red-300 text-red-700",children:"Failed"});default:return(0,d.jsx)(m.Badge,{variant:"outline",children:a})}})(a.payment_status)]})]})}),(0,d.jsxs)(l.CardContent,{children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Consultation Type"}),(0,d.jsx)("p",{className:"font-semibold capitalize",children:a.consultation_type})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Appointment Date & Time"}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(o.Calendar,{className:"h-4 w-4 text-primary"}),(0,d.jsx)("span",{className:"font-semibold",children:a.date}),(0,d.jsx)(p.Clock,{className:"h-4 w-4 text-primary ml-2"}),(0,d.jsx)("span",{className:"font-semibold",children:a.time})]})]})]}),a.message&&(0,d.jsxs)("div",{className:"mb-4 p-3 bg-muted rounded-lg",children:[(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Message"}),(0,d.jsx)("p",{className:"text-sm",children:a.message})]}),(0,d.jsxs)("div",{className:"text-xs text-muted-foreground mb-4",children:["Created: ",new Date(a.created_at).toLocaleString()]}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-2",children:["pending"===a.status&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.Button,{size:"sm",onClick:()=>F(a.id,"accepted"),disabled:A===a.id,children:A===a.id?(0,d.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(t.CheckCircle,{className:"h-4 w-4 mr-1"}),"Accept"]})}),(0,d.jsx)(k.Button,{size:"sm",variant:"destructive",onClick:()=>F(a.id,"declined"),disabled:A===a.id,children:A===a.id?(0,d.jsx)(v.Loader2,{className:"h-4 w-4 animate-spin"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.XCircle,{className:"h-4 w-4 mr-1"}),"Decline"]})})]}),"accepted"===a.status&&(0,d.jsx)(k.Button,{size:"sm",variant:"outline",onClick:()=>F(a.id,"completed"),disabled:A===a.id,children:"Mark as Completed"}),(0,d.jsx)(k.Button,{size:"sm",variant:"ghost",onClick:()=>G(a.id),disabled:A===a.id,children:"Delete"})]})]})]},a.id))})]})]})]})}[k,l,m]=w.then?(await w)():w,a.s(["default",()=>x]),c()}catch(a){c(a)}},!1),82950,a=>a.a(async(b,c)=>{try{var d=a.i(68884),e=a.i(38439),f=a.i(39713),g=a.i(63977),h=a.i(89175),i=a.i(93859),j=a.i(71643),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/appointments",pathname:"/admin/appointments",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/appointments",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=Testing_AstroWeb-7ae30bc1f7a1605f38f538a70a5f77df29722c38_de0c8bdf._.js.map