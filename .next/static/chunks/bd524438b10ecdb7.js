(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28304,e=>{"use strict";var t=e.i(13087),r=e.i(55571),a=e.i(29966);let n=(0,r.cva)("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function s({className:e,variant:r,...s}){return(0,t.jsx)("div",{className:(0,a.cn)(n({variant:r}),e),...s})}e.s(["Badge",()=>s])},68016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useIntersection",{enumerable:!0,get:function(){return o}});let a=e.r(3928),n=e.r(66916),s="function"==typeof IntersectionObserver,l=new Map,i=[];function o({rootRef:e,rootMargin:t,disabled:r}){let o=r||!s,[c,d]=(0,a.useState)(!1),u=(0,a.useRef)(null),f=(0,a.useCallback)(e=>{u.current=e},[]);return(0,a.useEffect)(()=>{if(s){if(o||c)return;let r=u.current;if(r&&r.tagName)return function(e,t,r){let{id:a,observer:n,elements:s}=function(e){let t,r={root:e.root||null,margin:e.rootMargin||""},a=i.find(e=>e.root===r.root&&e.margin===r.margin);if(a&&(t=l.get(a)))return t;let n=new Map;return t={id:r,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=n.get(e.target),r=e.isIntersecting||e.intersectionRatio>0;t&&r&&t(r)})},e),elements:n},i.push(r),l.set(r,t),t}(r);return s.set(e,t),n.observe(e),function(){if(s.delete(e),n.unobserve(e),0===s.size){n.disconnect(),l.delete(a);let e=i.findIndex(e=>e.root===a.root&&e.margin===a.margin);e>-1&&i.splice(e,1)}}}(r,e=>e&&d(e),{root:e?.current,rootMargin:t})}else if(!c){let e=(0,n.requestIdleCallback)(()=>d(!0));return()=>(0,n.cancelIdleCallback)(e)}},[o,t,e,c,u.current]),[f,c,(0,a.useCallback)(()=>{d(!1)},[])]}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},79409,(e,t,r)=>{"use strict";function a(e,t,r,a){return!1}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getDomainLocale",{enumerable:!0,get:function(){return a}}),e.r(33374),("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},63086,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return n}});let a=e.r(3928);function n(e,t){let r=(0,a.useRef)(null),n=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=s(e,a)),t&&(n.current=s(t,a))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},70957,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},27243,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a={default:function(){return k},useLinkStatus:function(){return C}};for(var n in a)Object.defineProperty(r,n,{enumerable:!0,get:a[n]});let s=e.r(55035),l=e.r(13087),i=s._(e.r(3928)),o=e.r(51616),c=e.r(79739),d=e.r(28149),u=e.r(7030),f=e.r(9166),p=e.r(96594),m=e.r(68016),h=e.r(79409),x=e.r(31212),g=e.r(63086);e.r(70957);let y=new Set;function j(e,t,r,a){if("undefined"!=typeof window&&(0,c.isLocalURL)(t)){if(!a.bypassPrefetchedCheck){let n=t+"%"+r+"%"+(void 0!==a.locale?a.locale:"locale"in e?e.locale:void 0);if(y.has(n))return;y.add(n)}e.prefetch(t,r,a).catch(e=>{})}}function b(e){return"string"==typeof e?e:(0,d.formatUrl)(e)}let v=i.default.forwardRef(function(e,t){let r,a,{href:n,as:s,children:d,prefetch:y=null,passHref:v,replace:N,shallow:C,scroll:k,locale:w,onClick:_,onNavigate:M,onMouseEnter:P,onTouchStart:L,legacyBehavior:B=!1,...O}=e;r=d,B&&("string"==typeof r||"number"==typeof r)&&(r=(0,l.jsx)("a",{children:r}));let A=i.default.useContext(p.RouterContext),E=!1!==y,{href:T,as:R}=i.default.useMemo(()=>{if(!A){let e=b(n);return{href:e,as:s?b(s):e}}let[e,t]=(0,o.resolveHref)(A,n,!0);return{href:e,as:s?(0,o.resolveHref)(A,s):t||e}},[A,n,s]),D=i.default.useRef(T),S=i.default.useRef(R);B&&(a=i.default.Children.only(r));let z=B?a&&"object"==typeof a&&a.ref:t,[U,I,F]=(0,m.useIntersection)({rootMargin:"200px"}),K=i.default.useCallback(e=>{(S.current!==R||D.current!==T)&&(F(),S.current=R,D.current=T),U(e)},[R,T,F,U]),q=(0,g.useMergedRef)(K,z);i.default.useEffect(()=>{!A||I&&E&&j(A,T,R,{locale:w})},[R,T,I,w,E,A?.locale,A]);let H={ref:q,onClick(e){B||"function"!=typeof _||_(e),B&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(e),!A||e.defaultPrevented||function(e,t,r,a,n,s,l,i,o){let d,{nodeName:u}=e.currentTarget;if(!("A"===u.toUpperCase()&&((d=e.currentTarget.getAttribute("target"))&&"_self"!==d||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which)||e.currentTarget.hasAttribute("download"))){if(!(0,c.isLocalURL)(r)){n&&(e.preventDefault(),location.replace(r));return}e.preventDefault(),(()=>{if(o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let e=l??!0;"beforePopState"in t?t[n?"replace":"push"](r,a,{shallow:s,locale:i,scroll:e}):t[n?"replace":"push"](a||r,{scroll:e})})()}}(e,A,T,R,N,C,k,w,M)},onMouseEnter(e){B||"function"!=typeof P||P(e),B&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),A&&j(A,T,R,{locale:w,priority:!0,bypassPrefetchedCheck:!0})},onTouchStart:function(e){B||"function"!=typeof L||L(e),B&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),A&&j(A,T,R,{locale:w,priority:!0,bypassPrefetchedCheck:!0})}};if((0,u.isAbsoluteUrl)(R))H.href=R;else if(!B||v||"a"===a.type&&!("href"in a.props)){let e=void 0!==w?w:A?.locale;H.href=A?.isLocaleDomain&&(0,h.getDomainLocale)(R,e,A?.locales,A?.domainLocales)||(0,x.addBasePath)((0,f.addLocale)(R,e,A?.defaultLocale))}return B?i.default.cloneElement(a,H):(0,l.jsx)("a",{...O,...H,children:r})}),N=(0,i.createContext)({pending:!1}),C=()=>(0,i.useContext)(N),k=v;("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},27633,(e,t,r)=>{t.exports=e.r(27243)},93273,e=>{"use strict";let t=(0,e.i(61233).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],93273)},44963,e=>{"use strict";let t=(0,e.i(61233).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],44963)},63283,e=>{"use strict";let t=(0,e.i(61233).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],63283)},11400,e=>{"use strict";let t=(0,e.i(61233).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],11400)},97587,e=>{"use strict";let t=(0,e.i(61233).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],97587)},21502,e=>{"use strict";let t=(0,e.i(61233).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],21502)},87878,e=>{"use strict";let t=(0,e.i(61233).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],87878)},35131,e=>{"use strict";let t=(0,e.i(61233).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],35131)},51537,e=>{"use strict";var t=e.i(13087),r=e.i(3928),a=e.i(36487),n=e.i(12281),s=e.i(27633),l=e.i(81284),i=e.i(32949),o=e.i(51961),c=e.i(78761),d=e.i(28304),u=e.i(93273),f=e.i(21502),p=e.i(97587),m=e.i(63283),h=e.i(11400),x=e.i(87878),g=e.i(35131);let y=(0,e.i(61233).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var j=e.i(44963);function b(){let e=(0,a.useRouter)(),{isAdmin:b,loading:v}=(0,l.useAuth)(),[N,C]=(0,r.useState)([]),[k,w]=(0,r.useState)(!0),[_,M]=(0,r.useState)(null),[P,L]=(0,r.useState)("all");(0,r.useEffect)(()=>{v||b||e.push("/")},[v,b,e]),(0,r.useEffect)(()=>{b&&B()},[b]);let B=async()=>{try{w(!0);let{data:e,error:t}=await i.supabase.from("appointments").select("*").order("created_at",{ascending:!1});if(t)throw t;C(e||[])}catch(e){console.error("Error fetching appointments:",e)}finally{w(!1)}},O=async(e,t)=>{try{M(e);let{error:r}=await i.supabase.from("appointments").update({status:t}).eq("id",e);if(r)throw r;C(r=>r.map(r=>r.id===e?{...r,status:t}:r))}catch(e){console.error("Error updating appointment:",e),alert("Failed to update appointment status")}finally{M(null)}},A=async e=>{if(confirm("Are you sure you want to delete this appointment?"))try{M(e);let{error:t}=await i.supabase.from("appointments").delete().eq("id",e);if(t)throw t;C(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting appointment:",e),alert("Failed to delete appointment")}finally{M(null)}};if(v||!b)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});let E="all"===P?N:N.filter(e=>e.status===P);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.default,{children:(0,t.jsx)("title",{children:"Manage Appointments - Admin Dashboard"})}),(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("div",{className:"bg-primary text-primary-foreground py-8",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 lg:px-8",children:[(0,t.jsx)(s.default,{href:"/admin",children:(0,t.jsxs)(o.Button,{variant:"ghost",className:"mb-4 text-primary-foreground hover:bg-primary-foreground/10",children:[(0,t.jsx)(u.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),(0,t.jsx)("h1",{className:"font-serif text-4xl font-bold mb-2",children:"Appointments"}),(0,t.jsx)("p",{className:"text-primary-foreground/90",children:"Manage consultation bookings"})]})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-wrap gap-2",children:[(0,t.jsxs)(o.Button,{variant:"all"===P?"default":"outline",onClick:()=>L("all"),children:["All (",N.length,")"]}),(0,t.jsxs)(o.Button,{variant:"pending"===P?"default":"outline",onClick:()=>L("pending"),children:["Pending (",N.filter(e=>"pending"===e.status).length,")"]}),(0,t.jsxs)(o.Button,{variant:"accepted"===P?"default":"outline",onClick:()=>L("accepted"),children:["Accepted (",N.filter(e=>"accepted"===e.status).length,")"]}),(0,t.jsxs)(o.Button,{variant:"completed"===P?"default":"outline",onClick:()=>L("completed"),children:["Completed (",N.filter(e=>"completed"===e.status).length,")"]})]}),k?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(j.Loader2,{className:"h-8 w-8 animate-spin text-primary mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading appointments..."})]}):0===E.length?(0,t.jsx)(c.Card,{children:(0,t.jsxs)(c.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(f.Calendar,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No appointments found"})]})}):(0,t.jsx)("div",{className:"space-y-4",children:E.map(e=>(0,t.jsxs)(c.Card,{className:"hover-elevate transition-all",children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.User,{className:"h-5 w-5 text-primary"}),e.name]}),(0,t.jsxs)(c.CardDescription,{className:"mt-2 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Mail,{className:"h-4 w-4"}),e.email]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Phone,{className:"h-4 w-4"}),e.phone]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[(e=>{switch(e){case"pending":return(0,t.jsx)(d.Badge,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"accepted":return(0,t.jsx)(d.Badge,{className:"bg-green-100 text-green-800",children:"Accepted"});case"declined":return(0,t.jsx)(d.Badge,{className:"bg-red-100 text-red-800",children:"Declined"});case"completed":return(0,t.jsx)(d.Badge,{className:"bg-blue-100 text-blue-800",children:"Completed"});default:return(0,t.jsx)(d.Badge,{variant:"secondary",children:e})}})(e.status),(e=>{switch(e){case"pending":return(0,t.jsx)(d.Badge,{variant:"outline",className:"border-yellow-300 text-yellow-700",children:"Payment Pending"});case"completed":return(0,t.jsx)(d.Badge,{variant:"outline",className:"border-green-300 text-green-700",children:"Paid"});case"failed":return(0,t.jsx)(d.Badge,{variant:"outline",className:"border-red-300 text-red-700",children:"Failed"});default:return(0,t.jsx)(d.Badge,{variant:"outline",children:e})}})(e.payment_status)]})]})}),(0,t.jsxs)(c.CardContent,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Consultation Type"}),(0,t.jsx)("p",{className:"font-semibold capitalize",children:e.consultation_type})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Appointment Date & Time"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Calendar,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("span",{className:"font-semibold",children:e.date}),(0,t.jsx)(p.Clock,{className:"h-4 w-4 text-primary ml-2"}),(0,t.jsx)("span",{className:"font-semibold",children:e.time})]})]})]}),e.message&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-muted rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Message"}),(0,t.jsx)("p",{className:"text-sm",children:e.message})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mb-4",children:["Created: ",new Date(e.created_at).toLocaleString()]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:["pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Button,{size:"sm",onClick:()=>O(e.id,"accepted"),disabled:_===e.id,children:_===e.id?(0,t.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.CheckCircle,{className:"h-4 w-4 mr-1"}),"Accept"]})}),(0,t.jsx)(o.Button,{size:"sm",variant:"destructive",onClick:()=>O(e.id,"declined"),disabled:_===e.id,children:_===e.id?(0,t.jsx)(j.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y,{className:"h-4 w-4 mr-1"}),"Decline"]})})]}),"accepted"===e.status&&(0,t.jsx)(o.Button,{size:"sm",variant:"outline",onClick:()=>O(e.id,"completed"),disabled:_===e.id,children:"Mark as Completed"}),(0,t.jsx)(o.Button,{size:"sm",variant:"ghost",onClick:()=>A(e.id),disabled:_===e.id,children:"Delete"})]})]})]},e.id))})]})]})]})}e.s(["default",()=>b],51537)},54121,(e,t,r)=>{let a="/admin/appointments";(window.__NEXT_P=window.__NEXT_P||[]).push([a,()=>e.r(51537)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([a])})},44752,e=>{e.v(t=>Promise.all(["static/chunks/5e92293b6c83e2a5.js"].map(t=>e.l(t))).then(()=>t(80957)))},66459,e=>{e.v(t=>Promise.all(["static/chunks/8771f9ebe22b6196.js"].map(t=>e.l(t))).then(()=>t(22419)))}]);