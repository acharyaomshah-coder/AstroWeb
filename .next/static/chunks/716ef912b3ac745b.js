(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34803,e=>{"use strict";var t=e.i(88627),a=e.i(84201),s=e.i(46577);let r=(0,a.cva)("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function i({className:e,variant:a,...i}){return(0,t.jsx)("div",{className:(0,s.cn)(r({variant:a}),e),...i})}e.s(["Badge",()=>i])},40061,e=>{"use strict";let t=(0,e.i(26822).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],40061)},68267,e=>{"use strict";let t=(0,e.i(26822).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],68267)},45966,e=>{"use strict";let t=(0,e.i(26822).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],45966)},70012,e=>{"use strict";let t=(0,e.i(26822).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],70012)},9700,e=>{"use strict";let t=(0,e.i(26822).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],9700)},95834,e=>{"use strict";let t=(0,e.i(26822).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],95834)},37624,e=>{"use strict";let t=(0,e.i(26822).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],37624)},93676,e=>{"use strict";var t=e.i(88627),a=e.i(65829),s=e.i(33289),r=e.i(31079),i=e.i(25474),n=e.i(39036),l=e.i(73535),d=e.i(56757),c=e.i(2434),o=e.i(34803),m=e.i(30065),u=e.i(9700),p=e.i(70012),h=e.i(68267),x=e.i(45966),g=e.i(95834),f=e.i(37624);let j=(0,e.i(26822).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var y=e.i(40061);function v(){let e=(0,s.useRouter)(),{isAdmin:v,loading:N}=(0,n.useAuth)(),[b,w]=(0,a.useState)([]),[k,C]=(0,a.useState)(!0),[B,A]=(0,a.useState)(null),[P,M]=(0,a.useState)("all");(0,a.useEffect)(()=>{N||v||e.push("/")},[N,v,e]),(0,a.useEffect)(()=>{v&&_()},[v]);let _=async()=>{try{C(!0);let{data:e,error:t}=await l.supabase.from("appointments").select("*").order("created_at",{ascending:!1});if(t)throw t;w(e||[])}catch(e){console.error("Error fetching appointments:",e)}finally{C(!1)}},L=async(e,t)=>{try{A(e);let{error:a}=await l.supabase.from("appointments").update({status:t}).eq("id",e);if(a)throw a;w(a=>a.map(a=>a.id===e?{...a,status:t}:a))}catch(e){console.error("Error updating appointment:",e),alert("Failed to update appointment status")}finally{A(null)}},z=async e=>{if(confirm("Are you sure you want to delete this appointment?"))try{A(e);let{error:t}=await l.supabase.from("appointments").delete().eq("id",e);if(t)throw t;w(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting appointment:",e),alert("Failed to delete appointment")}finally{A(null)}};if(N||!v)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)(y.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});let T="all"===P?b:b.filter(e=>e.status===P);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.default,{children:(0,t.jsx)("title",{children:"Manage Appointments - Admin Dashboard"})}),(0,t.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,t.jsx)("div",{className:"bg-primary text-primary-foreground py-8",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 lg:px-8",children:[(0,t.jsx)(i.default,{href:"/admin",children:(0,t.jsxs)(d.Button,{variant:"ghost",className:"mb-4 text-primary-foreground hover:bg-primary-foreground/10",children:[(0,t.jsx)(m.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),(0,t.jsx)("h1",{className:"font-serif text-4xl font-bold mb-2",children:"Appointments"}),(0,t.jsx)("p",{className:"text-primary-foreground/90",children:"Manage consultation bookings"})]})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-wrap gap-2",children:[(0,t.jsxs)(d.Button,{variant:"all"===P?"default":"outline",onClick:()=>M("all"),children:["All (",b.length,")"]}),(0,t.jsxs)(d.Button,{variant:"pending"===P?"default":"outline",onClick:()=>M("pending"),children:["Pending (",b.filter(e=>"pending"===e.status).length,")"]}),(0,t.jsxs)(d.Button,{variant:"accepted"===P?"default":"outline",onClick:()=>M("accepted"),children:["Accepted (",b.filter(e=>"accepted"===e.status).length,")"]}),(0,t.jsxs)(d.Button,{variant:"completed"===P?"default":"outline",onClick:()=>M("completed"),children:["Completed (",b.filter(e=>"completed"===e.status).length,")"]})]}),k?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(y.Loader2,{className:"h-8 w-8 animate-spin text-primary mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading appointments..."})]}):0===T.length?(0,t.jsx)(c.Card,{children:(0,t.jsxs)(c.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(u.Calendar,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"No appointments found"})]})}):(0,t.jsx)("div",{className:"space-y-4",children:T.map(e=>(0,t.jsxs)(c.Card,{className:"hover-elevate transition-all",children:[(0,t.jsx)(c.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(g.User,{className:"h-5 w-5 text-primary"}),e.name]}),(0,t.jsxs)(c.CardDescription,{className:"mt-2 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.Mail,{className:"h-4 w-4"}),e.email]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Phone,{className:"h-4 w-4"}),e.phone]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[(e=>{switch(e){case"pending":return(0,t.jsx)(o.Badge,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});case"accepted":return(0,t.jsx)(o.Badge,{className:"bg-green-100 text-green-800",children:"Accepted"});case"declined":return(0,t.jsx)(o.Badge,{className:"bg-red-100 text-red-800",children:"Declined"});case"completed":return(0,t.jsx)(o.Badge,{className:"bg-blue-100 text-blue-800",children:"Completed"});default:return(0,t.jsx)(o.Badge,{variant:"secondary",children:e})}})(e.status),(e=>{switch(e){case"pending":return(0,t.jsx)(o.Badge,{variant:"outline",className:"border-yellow-300 text-yellow-700",children:"Payment Pending"});case"completed":return(0,t.jsx)(o.Badge,{variant:"outline",className:"border-green-300 text-green-700",children:"Paid"});case"failed":return(0,t.jsx)(o.Badge,{variant:"outline",className:"border-red-300 text-red-700",children:"Failed"});default:return(0,t.jsx)(o.Badge,{variant:"outline",children:e})}})(e.payment_status)]})]})}),(0,t.jsxs)(c.CardContent,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Consultation Type"}),(0,t.jsx)("p",{className:"font-semibold capitalize",children:e.consultation_type})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Appointment Date & Time"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Calendar,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("span",{className:"font-semibold",children:e.date}),(0,t.jsx)(p.Clock,{className:"h-4 w-4 text-primary ml-2"}),(0,t.jsx)("span",{className:"font-semibold",children:e.time})]})]})]}),e.message&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-muted rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Message"}),(0,t.jsx)("p",{className:"text-sm",children:e.message})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mb-4",children:["Created: ",new Date(e.created_at).toLocaleString()]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:["pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Button,{size:"sm",onClick:()=>L(e.id,"accepted"),disabled:B===e.id,children:B===e.id?(0,t.jsx)(y.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.CheckCircle,{className:"h-4 w-4 mr-1"}),"Accept"]})}),(0,t.jsx)(d.Button,{size:"sm",variant:"destructive",onClick:()=>L(e.id,"declined"),disabled:B===e.id,children:B===e.id?(0,t.jsx)(y.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{className:"h-4 w-4 mr-1"}),"Decline"]})})]}),"accepted"===e.status&&(0,t.jsx)(d.Button,{size:"sm",variant:"outline",onClick:()=>L(e.id,"completed"),disabled:B===e.id,children:"Mark as Completed"}),(0,t.jsx)(d.Button,{size:"sm",variant:"ghost",onClick:()=>z(e.id),disabled:B===e.id,children:"Delete"})]})]})]},e.id))})]})]})]})}e.s(["default",()=>v],93676)},33217,(e,t,a)=>{let s="/admin/appointments";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(93676)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})},35581,e=>{e.v(t=>Promise.all(["static/chunks/279c8ad491389a66.js"].map(t=>e.l(t))).then(()=>t(68938)))},3424,e=>{e.v(t=>Promise.all(["static/chunks/88775f09a46bd3ff.js"].map(t=>e.l(t))).then(()=>t(69377)))}]);